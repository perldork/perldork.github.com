<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Development | Semintelligent - Max Schubert]]></title>
  <link href="http://perldork.github.io/blog/categories/development/atom.xml" rel="self"/>
  <link href="http://perldork.github.io/"/>
  <updated>2014-02-23T17:58:49-05:00</updated>
  <id>http://perldork.github.io/</id>
  <author>
    <name><![CDATA[Max Schubert]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Avoid Class Variables in Ruby for Web Applications]]></title>
    <link href="http://perldork.github.io/blog/2014/02/23/avoid-class-variables-in-ruby-for-web-applications/"/>
    <updated>2014-02-23T00:00:00-05:00</updated>
    <id>http://perldork.github.io/blog/2014/02/23/avoid-class-variables-in-ruby-for-web-applications</id>
    <content type="html"><![CDATA[<p>When a ruby application runs in a multi-process web container (phusion passenger or puma for example), class variables set in one
instance of the application will not be visible in another instance &ndash; so if you use them be very aware that the setting will purely
apply to the instance of the application in which the variables are set.</p>

<p>If you need to share data across instances of an application, consider using memcache or another host-level data storage mechanism
with a library that makes it easy to get and set data ( like <a href="https://github.com/mperham/dalli">Dalli</a> for ruby ).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Jquery Event Handlers - Pitfalls and Tips]]></title>
    <link href="http://perldork.github.io/blog/2013/08/11/jquery-event-handlers-pitfalls-and-tips/"/>
    <updated>2013-08-11T00:00:00-04:00</updated>
    <id>http://perldork.github.io/blog/2013/08/11/jquery-event-handlers-pitfalls-and-tips</id>
    <content type="html"><![CDATA[<p>Always return true or false at the end of the handler; true to allow additional events to fire, false to stop event propogation. If you do not oh boy will you get very strange behavior. For example, in recent Firefox releases you will get an error thrown with HTTP status 0 and message “Error,” yep, that is all you get.</p>

<p>if you have mutiple elementa trigger the same event and the only difference is data ( for example a list of names where clicking posts the name ), write a handler based off of a CSS class selector. Do not create one handler per row or item using unique div IDs as the CSS selector – this eats browser memory quickly!</p>

<p>Save jQuery elements in function scoped variablea and chain events from them – doing $( “selector” ) calls for the same element over and over again is expensive time and memory wise and slows your code down.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using Pry With Padrino]]></title>
    <link href="http://perldork.github.io/blog/2012/06/04/using-pry-with-padrino/"/>
    <updated>2012-06-04T00:00:00-04:00</updated>
    <id>http://perldork.github.io/blog/2012/06/04/using-pry-with-padrino</id>
    <content type="html"><![CDATA[<p>Pry is a really powerful replacement for IRB – I love using it with Rails. I recently started working with Padrino and of course had to have it working there as well.</p>

<p>Pry will read and execute a .pryrc file that exists in the current directory as it boots – here is my Padrino specific .pryrc file – it boots your app just like you’d get in Rails using Pry:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>.pryrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">load</span> <span class="sx">%{./config/boot.rb}</span>
</span><span class='line'><span class="nb">load</span> <span class="sx">%{./config/database.rb}</span>
</span><span class='line'><span class="nb">load</span> <span class="sx">%{./config/apps.rb}</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;p&gt;require &amp;lsquo;padrino-core/</span><span class="n">cli</span><span class="o">/</span><span class="n">console</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;</span>
</span><span class='line'><span class="nb">require</span> <span class="o">&amp;</span><span class="n">lsquo</span><span class="p">;</span><span class="n">padrino</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">cli</span><span class="o">/</span><span class="n">adapter</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;</span>
</span><span class='line'><span class="nb">require</span> <span class="o">&amp;</span><span class="n">lsquo</span><span class="p">;</span><span class="n">padrino</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">cli</span><span class="o">/</span><span class="n">base</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;</span>
</span><span class='line'><span class="nb">require</span> <span class="o">&amp;</span><span class="n">lsquo</span><span class="p">;</span><span class="n">padrino</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">cli</span><span class="o">/</span><span class="n">rake</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;</span>
</span><span class='line'><span class="nb">require</span> <span class="o">&amp;</span><span class="n">lsquo</span><span class="p">;</span><span class="n">padrino</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">cli</span><span class="o">/</span><span class="n">rake_tasks</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;p&gt;def app</span>
</span><span class='line'><span class="sr">  Padrino.application</span>
</span><span class='line'><span class="sr">end&lt;/</span><span class="nb">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">start</span><span class="p">(</span> <span class="n">server</span> <span class="o">=</span> <span class="ss">:puma</span> <span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="sx">%{Type Ctrl-C to background server}</span>
</span><span class='line'>  <span class="no">Padrino</span><span class="o">.</span><span class="n">run!</span> <span class="ss">server</span><span class="p">:</span> <span class="n">server</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="sx">%{Problem starting server: </span><span class="si">#{</span> <span class="n">e</span><span class="o">.</span><span class="n">to_s</span> <span class="si">}</span><span class="sx">}</span>
</span><span class='line'><span class="k">end</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;p&gt;def stop</span>
</span><span class='line'><span class="sr">  puts %{Stopping server}</span>
</span><span class='line'><span class="sr">  threads = Thread.list</span>
</span><span class='line'><span class="sr">  threads.shift</span>
</span><span class='line'><span class="sr">  threads.each { |t| Thread.kill t }</span>
</span><span class='line'><span class="sr">end&lt;/</span><span class="nb">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">save_to</span><span class="p">(</span> <span class="n">file</span><span class="p">,</span> <span class="n">contents</span> <span class="p">)</span>
</span><span class='line'>  <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">file</span><span class="p">,</span> <span class="sx">%{w}</span> <span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">puts</span> <span class="n">contents</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using Padrino Before and After Blocks in Rspec Tests]]></title>
    <link href="http://perldork.github.io/blog/2012/02/05/using-padrino-before-and-after-blocks-in-rspec-tests/"/>
    <updated>2012-02-05T00:00:00-05:00</updated>
    <id>http://perldork.github.io/blog/2012/02/05/using-padrino-before-and-after-blocks-in-rspec-tests</id>
    <content type="html"><![CDATA[<p>We add in code that allows us to send mock parameters to controller actions via Capybara tests for all controllers while testing -so we can simulate session state ( for example &ndash; user being logged in ). In Rails you do this by re-opening ApplicationController in spec/spec_helper.rb and adding in a before_filter. In Padrino you can do this by adding custom code to app.rb in a before block &ndash; the before block is called for every controller action.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>app/app.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">configure</span> <span class="ss">:test</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">before</span> <span class="k">do</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;pre&gt;&lt;code&gt;params.keys.each do |param|</span>
</span><span class='line'><span class="sr">  if param =~ /</span><span class="o">^</span><span class="n">mock_</span><span class="o">/</span>
</span><span class='line'>    <span class="n">mock_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/mock_/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">session</span><span class="o">[</span> <span class="n">mock_param</span> <span class="o">]</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span> <span class="n">param</span> <span class="o">]</span>
</span><span class='line'>    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="sx">%{ </span><span class="si">#{</span><span class="n">mock_param</span><span class="si">}</span><span class="sx"> set to </span><span class="si">#{</span><span class="n">params</span><span class="o">[</span> <span class="n">param</span> <span class="o">]</span><span class="si">}</span><span class="sx">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="o">&lt;</span><span class="sr">/code&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
</feed>
