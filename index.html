
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Semintelligent - Max Schubert</title>
  <meta name="author" content="Max Schubert">

  
  <meta name="description" content=". And if you could could go ahead and get a can of pesticide and take care of the roach problem we&#8217;ve been having that would be great.Office &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://perldork.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Semintelligent - Max Schubert" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Semintelligent - Max Schubert</a></h1>
  
    <h2>My Bain Huuts!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:perldork.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/categories">Categories</a></li>
  <li><a href="/music">Music</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/13/testing-log-messages-with-rspec-and-padrino/">Testing Log Messages With Rspec and Padrino</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-13T14:41:08-04:00" pubdate data-updated="true">Mar 13<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>.</p>

<blockquote><p>And if you could could go ahead and get a can of pesticide and take care <br/>of the roach problem we&#8217;ve been having that would be great.</p><footer><strong>Office Space</strong></footer></blockquote>


<p>While as a general rule testing log output can make tests brittle
because logs are free text and can change easily, there are certainly
cases where testing them makes sense.</p>

<p>In my case our application was missing some really important business
flow logging that we discovered was needed when we attempted to
troubleshoot a production issue. We had to spend a significant amount of
time hunting something down that would have been trivial to find in a
well formatted info log message. I added that logging to the
application and then wanted to make sure these business level log messages
were being emitted at the right places in the application.</p>

<p>To test log messages in Padrino, I added the following helper to our
spec/support/spec_helpers.rb file:</p>

<figure class='code'><figcaption><span>spec/helpers/spec_helpers.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Pass a block and log output will be captured in that block and</span>
</span><span class='line'><span class="c1"># returned as an array of lines for testing.</span>
</span><span class='line'><span class="k">def</span> <span class="nf">capture_logger_output</span>
</span><span class='line'>  <span class="n">logger</span><span class="o">.</span><span class="n">flush</span>
</span><span class='line'>  <span class="c1"># This causes messages to be captured in the internal logger array</span>
</span><span class='line'>  <span class="c1"># that can be accessed via logger.buffer.</span>
</span><span class='line'>  <span class="n">logger</span><span class="o">.</span><span class="n">auto_flush</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Run user&#39;s code</span>
</span><span class='line'>  <span class="k">yield</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Save the log lines captured during the test block</span>
</span><span class='line'>  <span class="c1"># NOTE: have to clone otherwise flush clears the referred to array</span>
</span><span class='line'>  <span class="n">buffer</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">clone</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">logger</span><span class="o">.</span><span class="n">flush</span>
</span><span class='line'>  <span class="n">logger</span><span class="o">.</span><span class="n">auto_flush</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">buffer</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now in your tests you can run test code and capture any log messages that
happened during the code run!</p>

<figure class='code'><figcaption><span>spec/helpers/spec_helpers.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">it</span> <span class="n">should</span> <span class="nb">test</span> <span class="n">something</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">messages</span> <span class="o">=</span> <span class="n">capture_logger_output</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">post</span> <span class="sx">%{/to/some/url}</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">set_csrf</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="n">expect</span><span class="p">(</span> <span class="n">last_response</span><span class="o">.</span><span class="n">status</span> <span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span> <span class="mi">200</span>
</span><span class='line'>  <span class="n">expect</span><span class="p">(</span> <span class="n">messages</span><span class="o">.</span><span class="n">select</span><span class="p">{</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">line</span> <span class="o">=~</span> <span class="sr">/general match/</span> <span class="p">}</span><span class="o">.</span><span class="n">first</span> <span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span> <span class="sr">/specific-pattern/</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Happy log testing!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/27/when-writing-rspec-tests-15-pieces-of-flair-is-perfect-just-ignore-brian/">When Writing Rspec Tests 15 Pieces of Flair Is Perfect Just Ignore Brian</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-27T19:59:49-05:00" pubdate data-updated="true">Feb 27<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Stan, Chotchkie&#8217;s Manager: Now, you know it&#8217;s up to you whether or not<br/>you want to just do the bare minimum. Or&#8230; well, like Brian, for<br/>example, has thirty seven pieces of flair, okay. And a terrific smile.</p><footer><strong>Office Space</strong></footer></blockquote>


<p>Forget Brian, when it comes to writing rspec tests let your lazy come
out.  Do the minimum.  Write a test that just does enough to prove
that your feature or component behaves as expected.</p>

<h3>Do</h3>

<ul>
<li>Test all known user story / requirement business paths ( &ldquo;happy paths&rdquo; )
related to the component or feature.</li>
<li>Write a test that really exercises them with real data ( not mocks
unless you have no other choice but to use mocks ).</li>
<li>Write it so it both proves your code does what it is supposed to do
and so that it teaches other developers looking at it how that part of
the application or component should behave</li>
</ul>


<h3>Don&rsquo;t</h3>

<ul>
<li>Write a placeholder or filler test just so you can say you have test
coverage</li>
<li>Validate every single attribute or piece of data related to the test;
that makes your test very tightly coupled to the implementation and
means that any tiny change to the code requires the test to be updated
as well.  This makes developers hate you and your overly high-maintenance tests.</li>
<li>Be obscure nor clever.  Make the test direct and simple &ndash; the way we&rsquo;d
all like our English to be!</li>
<li>Use mocks unless you absolutely need to.  Why?  Mocks quickly become
lies &ndash; if they are flexible enough to take made up method names they are
likely to continue to take that made up method name even when the real
implementation changes. Now your test lies to everyone when it says
it passes because what it tests is something that is not used in the real
implementation.  The only place I personally feel comfortable with
mocks is when external network-based services are dependencies and
having them reliably be available in development and test environments
is not possible.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/25/how-to-rack-attack-with-dalli-and-padrino/">HOW-TO: Rack::Attack With Dalli and Padrino</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-25T23:24:42-05:00" pubdate data-updated="true">Feb 25<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We use <a href="https://github.com/mperham/dalli">Dalli</a> for memcached-based route caching with
<a href="http://www.padrinorb.com/">Padrino</a> 0.12. I wanted to add rate throttling for all /api
route handlers to our app and wanted to use Dalli for that as well.</p>

<p>I found <a href="https://github.com/kickstarter/rack-attack">Rack::Attack</a>, a
really nice Rack-based gem that allows for connection throttling,
blacklisting and whitelisting of clients.  Cool stuff, perfect for our
needs.  Except it expects the caching layer to conform to the
ActiveSupport::Cache::Store interface:</p>

<blockquote><p>Note that Rack::Attack.cache is only used for throttling; not<br/>blacklisting &amp; whitelisting. Your cache store must implement increment<br/>and write like ActiveSupport::Cache::Store.</p></blockquote>


<p>Darn!  Oh, wait, not so bad.  But I don&rsquo;t want to have to do inline
creation of the client etc in app/app.rb, especially because I&rsquo;m likely
to have different throttling requirements for different environments.</p>

<h3>Modules and blocks to the rescue!</h3>

<ol>
<li>Create a subclass for the Dalli client that conforms to the ActiveSupport API.</li>
<li>Create a helper method that can be used inline in app/app.rb that
takes a block with an environment-specific policy.</li>
<li>Wrap the use and cache client creation so it doesn&rsquo;t have to be
repeated in app/app.rb</li>
</ol>


<h5>Our security mixin module with configure_security helper</h5>

<figure class='code'><figcaption><span>lib/security.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Security</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;dalli/client&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="vc">@@store</span> <span class="o">=</span> <span class="kp">nil</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Dalli client does not conform to cache client</span>
</span><span class='line'>  <span class="c1"># interface Rack::Attack expects - so add wrappers</span>
</span><span class='line'>  <span class="c1"># for methods.</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">MemStore</span> <span class="o">&lt;</span> <span class="ss">Dalli</span><span class="p">:</span><span class="ss">:Client</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">decrement</span><span class="p">(</span> <span class="n">key</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">options</span> <span class="p">)</span>
</span><span class='line'>      <span class="n">decr</span><span class="p">(</span> <span class="n">key</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">options</span><span class="o">[</span> <span class="ss">:expires_in</span> <span class="o">]</span> <span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span> <span class="n">key</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">options</span> <span class="p">)</span>
</span><span class='line'>      <span class="n">incr</span><span class="p">(</span> <span class="n">key</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">options</span><span class="o">[</span> <span class="ss">:expires_in</span> <span class="o">]</span><span class="p">,</span> <span class="kp">nil</span> <span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">options</span> <span class="p">)</span>
</span><span class='line'>      <span class="c1"># Have to use raw =&gt; true for write or we get marshall</span>
</span><span class='line'>      <span class="c1"># errors as Dalli marshals the Fixnum object instead of</span>
</span><span class='line'>      <span class="c1"># sending the raw integer value</span>
</span><span class='line'>      <span class="n">set</span><span class="p">(</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">options</span><span class="o">[</span> <span class="ss">:expires_in</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:raw</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize_store</span>
</span><span class='line'>    <span class="k">if</span> <span class="vc">@@store</span><span class="o">.</span><span class="n">nil?</span>
</span><span class='line'>      <span class="n">use</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:Attack</span>
</span><span class='line'>      <span class="vc">@@store</span> <span class="o">=</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:Attack</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">store</span> <span class="o">=</span> <span class="no">MemStore</span><span class="o">.</span><span class="n">new</span> <span class="sx">%{localhost:11211}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Called from app/app.rb</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">configure_security</span>
</span><span class='line'>    <span class="n">initialize_store</span>
</span><span class='line'>    <span class="k">yield</span><span class="p">(</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:Attack</span> <span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Now use it in app/app.rb</h5>

<figure class='code'><figcaption><span>app/app.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">extend</span> <span class="no">Security</span> <span class="c1"># lib/security.rb - adds configure_security method</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">configure</span> <span class="ss">:demo</span><span class="p">,</span> <span class="ss">:development</span><span class="p">,</span> <span class="ss">:api</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Rate limit calls to /api URLs to 2 a second in all envs.</span>
</span><span class='line'>      <span class="n">configure_security</span> <span class="k">do</span> <span class="o">|</span><span class="n">client</span><span class="o">|</span>
</span><span class='line'>        <span class="n">client</span><span class="o">.</span><span class="n">throttle</span><span class="p">(</span><span class="s1">&#39;req/ip&#39;</span><span class="p">,</span> <span class="ss">:limit</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">:period</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="o">.</span><span class="n">second</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
</span><span class='line'>          <span class="c1"># If we return false nothing is cached ( no rate limiting )</span>
</span><span class='line'>          <span class="c1"># - only rate limit calls to /api URLs</span>
</span><span class='line'>          <span class="n">req</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">index</span><span class="p">(</span> <span class="sx">%{/api}</span> <span class="p">)</span><span class="o">.</span><span class="n">nil?</span> <span class="p">?</span> <span class="kp">false</span> <span class="p">:</span> <span class="n">req</span><span class="o">.</span><span class="n">ip</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/24/hints-and-advice-for-java-developers-new-to-ruby/">Hints and Tips for Java Developers New to Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-24T22:48:02-05:00" pubdate data-updated="true">Feb 24<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Most java developers have a really solid grasp of object-oriented
concepts and patterns, which makes the transition to ruby easy really easy
from that perspective.  Moving from a statically typed to dynamic
language is still a big change and some of the more basic coding practices
change significantly.  Here are some recommendations I&rsquo;ve come up with
based on my experiences doing mentoring with a bunch of java developers
transitioning to ruby on our team and some code patterns I&rsquo;ve heard used
by a colleague of mine who is also mentoring some java developers who
are transitioning to ruby.</p>

<h3>Hints</h3>

<ul>
<li>Minimize the use of class variables &ndash; ruby&rsquo;s class variables have some
strange inheritence rules, and, with multi-process web containers,
they don&rsquo;t act as singletons across all instances of an app on the
same server anyway.</li>
<li>Prefer local variables over instance variables when possible.
Minimizing the scope of a variable in a dynamic language reduces the
possibility of bugs and makes it much easier to see where the variable
is being set and used.</li>
<li>Don&rsquo;t pre-initialize data structures &ndash; no need.  Arrays and hashes are
dynamic and in the vast majority of circumstances pre-sizing them does
not help performance and just leads to more noise in your code.</li>
<li>Snake-case variables .. thing_one and thing_two.</li>
<li>Semi-colons are not needed at the ends of statements ; only use them
when doing single-line method definitions or rare cases where you want
two statements on the same line.</li>
<li>Prefer composition over complex inheritence trees.</li>
<li>Prefer mixins over complex inheritence trees.</li>
</ul>


<h3>Tips</h3>

<ul>
<li>Explore code with irb or <a href="http://pryrepl.org/">Pry</a>. No faster way to
get conversant with ruby than to explore using it from a ruby-based
shell!</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/23/great-tools-for-distributed-teams/">Great Tools for Distributed Teams</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-23T18:28:38-05:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently at my job our teams have grown to include a number of people
who are not co-located with us.  Here are some of the tools we&rsquo;ve been
using that have helped us develop and design together across locations.</p>

<h3>Social coding</h3>

<ul>
<li><a href="http://gitlab.org/">Gitlab</a> &ndash; Github-like UI on top of git.  Many of
the same features of Github, pretty easy to host internally.</li>
</ul>


<h3>Remote pair programming</h3>

<ul>
<li><a href="http://www.screenhero.com">Screenhero</a> &ndash; by far the best remote
graphical pair-programming tool I&rsquo;ve found &ndash; includes streaming audio
support so we don&rsquo;t have to have Google Hangouts, Skype, or another
audio application open as well.</li>
<li><a href="https://github.com/seejohnrun/haste-server">Hastebin</a> &ndash; a paste bin
tool that runs on node and is easy to set up internally &ndash; fast, low
memory usage, zero maintenance.</li>
</ul>


<h3>Remote design</h3>

<ul>
<li><a href="http://www.asciiflow.com/">ASCII Flow</a> &ndash; java-based, open source
ASCII diagramming tool.  Great for cutting and posting diagrams into
markdown files.  Haven&rsquo;t tried installing it internally yet.</li>
<li><a href="http://etherpad.org/">Etherpad</a> &ndash; near-real time collaborative,
modeless editing tool &ndash; like Google docs, highlights each person&rsquo;s
text in a different color.  Runs on node as well.</li>
</ul>


<h3>Remote communication</h3>

<p>We&rsquo;ve heard a lot about various team-oriented chat tools, for now we&rsquo;ve
been sticking to the basics and so far so good.</p>

<ul>
<li>IRC</li>
<li><a href="http://blast.aim.com/">AIM blast bots</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/23/avoid-class-variables-in-ruby-for-web-applications/">Avoid Class Variables in Ruby for Web Applications</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-23T00:00:00-05:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When a ruby application runs in a multi-process web container (phusion passenger or puma for example), class variables set in one
instance of the application will not be visible in another instance &ndash; so if you use them be very aware that the setting will purely
apply to the instance of the application in which the variables are set.</p>

<p>If you need to share data across instances of an application, consider using memcache or another host-level data storage mechanism
with a library that makes it easy to get and set data ( like <a href="https://github.com/mperham/dalli">Dalli</a> for ruby ).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/11/jquery-event-handlers-pitfalls-and-tips/">Jquery Event Handlers - Pitfalls and Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-11T00:00:00-04:00" pubdate data-updated="true">Aug 11<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Always return true or false at the end of the handler; true to allow additional events to fire, false to stop event propogation. If you do not oh boy will you get very strange behavior. For example, in recent Firefox releases you will get an error thrown with HTTP status 0 and message “Error,” yep, that is all you get.</p>

<p>if you have mutiple elementa trigger the same event and the only difference is data ( for example a list of names where clicking posts the name ), write a handler based off of a CSS class selector. Do not create one handler per row or item using unique div IDs as the CSS selector – this eats browser memory quickly!</p>

<p>Save jQuery elements in function scoped variablea and chain events from them – doing $( “selector” ) calls for the same element over and over again is expensive time and memory wise and slows your code down.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/04/using-pry-with-padrino/">Using Pry With Padrino</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-04T00:00:00-04:00" pubdate data-updated="true">Jun 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Pry is a really powerful replacement for IRB – I love using it with Rails. I recently started working with Padrino and of course had to have it working there as well.</p>

<p>Pry will read and execute a .pryrc file that exists in the current directory as it boots – here is my Padrino specific .pryrc file – it boots your app just like you’d get in Rails using Pry:</p>

<figure class='code'><figcaption><span>.pryrc </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">load</span> <span class="sx">%{./config/boot.rb}</span>
</span><span class='line'><span class="nb">load</span> <span class="sx">%{./config/database.rb}</span>
</span><span class='line'><span class="nb">load</span> <span class="sx">%{./config/apps.rb}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;padrino-core/cli/console&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;padrino-core/cli/adapter&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;padrino-core/cli/base&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;padrino-core/cli/rake&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;padrino-core/cli/rake_tasks&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">app</span>
</span><span class='line'>  <span class="no">Padrino</span><span class="o">.</span><span class="n">application</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">start</span><span class="p">(</span> <span class="n">server</span> <span class="o">=</span> <span class="ss">:puma</span> <span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="sx">%{Type Ctrl-C to background server}</span>
</span><span class='line'>  <span class="no">Padrino</span><span class="o">.</span><span class="n">run!</span> <span class="ss">server</span><span class="p">:</span> <span class="n">server</span>
</span><span class='line'><span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="sx">%{Problem starting server: </span><span class="si">#{</span> <span class="n">e</span><span class="o">.</span><span class="n">to_s</span> <span class="si">}</span><span class="sx">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">stop</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="sx">%{Stopping server}</span>
</span><span class='line'>  <span class="n">threads</span> <span class="o">=</span> <span class="no">Thread</span><span class="o">.</span><span class="n">list</span>
</span><span class='line'>  <span class="n">threads</span><span class="o">.</span><span class="n">shift</span>
</span><span class='line'>  <span class="n">threads</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="no">Thread</span><span class="o">.</span><span class="n">kill</span> <span class="n">t</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">save_to</span><span class="p">(</span> <span class="n">file</span><span class="p">,</span> <span class="n">contents</span> <span class="p">)</span>
</span><span class='line'>  <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">file</span><span class="p">,</span> <span class="sx">%{w}</span> <span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">puts</span> <span class="n">contents</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/05/using-padrino-before-and-after-blocks-in-rspec-tests/">Using Padrino Before and After Blocks in Rspec Tests</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-05T00:00:00-05:00" pubdate data-updated="true">Feb 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We add in code that allows us to send mock parameters to controller actions via Capybara tests for all controllers while testing -so we can simulate session state ( for example &ndash; user being logged in ). In Rails you do this by re-opening ApplicationController in spec/spec_helper.rb and adding in a before_filter. In Padrino you can do this by adding custom code to app.rb in a before block &ndash; the before block is called for every controller action.</p>

<figure class='code'><figcaption><span>app/app.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">configure</span> <span class="ss">:test</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">before</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">param</span><span class="o">|</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">param</span> <span class="o">=~</span> <span class="sr">/^mock_/</span>
</span><span class='line'>        <span class="n">mock_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/mock_/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">session</span><span class="o">[</span> <span class="n">mock_param</span> <span class="o">]</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span> <span class="n">param</span> <span class="o">]</span>
</span><span class='line'>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="sx">%{ </span><span class="si">#{</span><span class="n">mock_param</span><span class="si">}</span><span class="sx"> set to </span><span class="si">#{</span><span class="n">params</span><span class="o">[</span> <span class="n">param</span> <span class="o">]</span><span class="si">}</span><span class="sx">}</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/03/13/testing-log-messages-with-rspec-and-padrino/">Testing Log Messages With Rspec and Padrino</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/27/when-writing-rspec-tests-15-pieces-of-flair-is-perfect-just-ignore-brian/">When Writing Rspec Tests 15 Pieces of Flair Is Perfect Just Ignore Brian</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/25/how-to-rack-attack-with-dalli-and-padrino/">HOW-TO: Rack::Attack With Dalli and Padrino</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/24/hints-and-advice-for-java-developers-new-to-ruby/">Hints and Tips for Java Developers New to Ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/23/great-tools-for-distributed-teams/">Great Tools for Distributed Teams</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/perldork">@perldork</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'perldork',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/max.schubert?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Max Schubert -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'semintgelligent';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
